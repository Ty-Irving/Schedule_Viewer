<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel = "stylesheet" href = "../CSS/styles.css"/>
    <title>Log In</title>
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script type="text/javascript" src="../JavaScript/queries.js"></script>
</head>

<body class="bg">

    <div class = "login-panel">
        <div class = "login-header">
            Login
        </div>
        <div class = "input-box">
            <img src = "../HTML/user-img.png" class = "box-img">
            <input type = "text" class = "user-text" maxlength = "30" placeholder = "Username" id = "user"></input>
        </div>
        <div class = "input-box">
            <img src = "../HTML/password-img.png" class = "box-img">
            <input type = "password" class = "user-text" maxlength = "30" placeholder = "Password" id = "pass"></input>
        </div>
        <div class = "create-acc">
            <a href = "create_account.html">Create Account</a>
        </div>
        <button class = "login-button" onclick = "checkLogin()">LOGIN</button>
    </div>
</body>
</html>

<script type = "text/javascript">

window.onload = function() {
    if(!window.location.hash) {
        window.location = window.location + '#loaded';
        window.location.reload();
    }
    }
    
function checkLogin()
    {
        const USER = document.getElementById("user");
        const PASS = document.getElementById("pass");

        var userkey = initUser(USER.value, PASS.value);
        var managerListKey = initManagerList();

        console.log("The current user is: " + localStorage.getItem(userkey));
        var userID = JSON.parse(localStorage.getItem(userkey)).UserId;
        console.log("The user id is: " + userID);

        var managerList = JSON.parse(localStorage.getItem(managerListKey));
        managerList.forEach(element => {
            if (userID == element.ManagerID)
                window.location.href = "builder.html";
            else
                window.location.href = "schedule_view.html";
        });
    } 

</script>



<style type="text/css">

    /* @media only screen {
        .login-button {
            background-color: red;
        }
    } */


    .user-text {
        resize: none;
        display: block;
        margin-left: auto;
        margin-right: auto;
        width:  230px;
        height: 30px;
        float: right;
        border: none;
        outline: none;
        background-color: whitesmoke;
    }

    .create-acc
    {
        width: 40%;
        margin-left: auto;
        margin-right: auto;
        margin-bottom: 10px;
        margin-top: 5px;
        text-align: right;
        font-size: 14px; 
    }

    a
    {
        text-decoration: none;
        color: #04AA6D;
    }


    .login-header
    {
        width: 40%;
        margin-left: auto;
        margin-right: auto;
        font-size: 24px;
        color: #04AA6D;
        font-weight: bold;
        padding-top: 90px;
    }

    .box-img
    {
        width: 25px;
        padding-left: 10px;
        padding-top: 3px;
    }

    .input-box
    {
        margin-top: 25px;
        width: 40%;
        margin-left: auto;
        margin-right: auto;
        border: rgb(49, 46, 46) 1px solid;
        height: 32px;
    }

    .login-button {
        margin-left: auto;
        margin-right: auto;
        display: block;
        width: 40%;
        margin-top: 5%;
        height: 40px;
        border-radius: 8px;
        border-style: double;
        background-color: #04AA6D;
        color: white; 
    }
    
    .login-panel {
        opacity: 88%;
        width: 700px;
        height: 60ex;
        background-color: whitesmoke;
        margin-left: auto;
        margin-right: auto;
        margin-top: 15%;
    }

    .bg {
        position: fixed;
        width: 100%;
        height: 100%;
        background: url("https://bit.ly/3tFgT8c");
        background-position: center;
        background-attachment: fixed;
        background-size: cover;
    }

    /* img
    {
        filter: invert(1);
    } */


</style>